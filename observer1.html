<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Impl√©mentation du Pattern Observer ‚Äì Grandes Cartes</title>

<!-- Tailwind CSS -->
<script src="https://cdn.tailwindcss.com"></script>

<!-- Prism CSS -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/themes/prism.min.css" />

<style>
.card-container {
  perspective: 1000px;
  cursor: pointer;
}

.card {
  transition: transform 0.8s;
  transform-style: preserve-3d;
  position: relative;
}

.card.is-flipped {
  transform: rotateY(180deg);
}

.card-face {
  position: absolute;
  width: 100%;
  height: 100%;
  backface-visibility: hidden;
}

.card-back {
  transform: rotateY(180deg);
}

.card-content {
  overflow:auto; 
}

/* Scrollbar personnalis√©e (si besoin) */
.card-content::-webkit-scrollbar {
  width: 8px;
}
.card-content::-webkit-scrollbar-thumb {
  background-color: #4a5568;
  border-radius: 4px;
}
.card-content::-webkit-scrollbar-track {
  background: #2d3748;
}
</style>

</head>
<body class="bg-gray-800 text-gray-200 font-sans">

<section class="max-w-3xl mx-auto p-6 mt-6 bg-gray-700 rounded shadow-sm">
  <h2 class="text-xl font-semibold mb-4">Suivez les cartes ci-dessous</h2>
  <p class="mb-4">
    Chaque carte pr√©sente d'abord ce qu'on va faire (recto), puis le code impl√©ment√© (verso).
    Cliquez sur une carte pour la retourner et voir le code final.
  </p>
</section>
 
<!-- On met toutes les cartes en une seule colonne, les unes sous les autres -->
<section class="max-w-[60rem] mx-auto p-6 space-y-10">

  <!-- Carte √âtape 1 -->
  <div class="card-container w-[50rem] h-[60rem] bg-gray-900 rounded shadow-lg relative mx-auto">
    <div class="card w-full h-full">
      <!-- Recto (face) -->
      <div class="card-face flex flex-col p-8 bg-gray-800 rounded">
        <h3 class="text-3xl font-bold mb-4">√âtape 1 : ArtefactTerrestre</h3>
        <p class="mb-4 text-lg">Actions pr√©vues :</p>
        <ul class="list-inside space-y-2 text-base">
          <li>
            üèó <span class="font-semibold">Cr√©er une classe</span> 
            <span class="text-yellow-300 font-semibold">ArtefactTerrestre</span> avec un attribut 
            <span class="text-yellow-300 font-semibold">umweltPower</span>
          </li>
          <li>
            üß© Ajouter un 
            <span class="text-yellow-300 font-semibold">PropertyChangeSupport</span> 
            pour g√©rer les notifications
          </li>
          <li>
            üéß Fournir <span class="text-yellow-300 font-semibold">addPropertyChangeListener</span> 
            et <span class="text-yellow-300 font-semibold">removePropertyChangeListener</span>
          </li>
          <li>
            üö® Dans <span class="text-yellow-300 font-semibold">setUmweltPower</span>, appeler 
            <span class="text-yellow-300 font-semibold">firePropertyChange</span> 
            quand la valeur change
          </li>
          <li>
            üñ® Red√©finir <span class="text-yellow-300 font-semibold">toString</span> pour un affichage lisible
          </li>
        </ul>
        <p class="text-sm text-gray-400 italic mt-4">Cliquez pour voir le code impl√©ment√©.</p>
      </div>
      <!-- Verso (back) -->
      <div class="card-face card-back bg-gray-900 text-white rounded p-4 flex flex-col">
        <h3 class="text-xl font-semibold mb-4">Code de ArtefactTerrestre avec commentaires</h3>
        <div class="card-content bg-gray-800 rounded p-2 overflow-auto text-sm h-full">
          <pre class="language-java text-sm leading-normal"><code>
import java.beans.PropertyChangeSupport;
import java.beans.PropertyChangeListener;

class ArtefactTerrestre {
    private int umweltPower;
    private PropertyChangeSupport pcs;

    // Le constructeur initialise le PropertyChangeSupport
    public ArtefactTerrestre() {
        pcs = new PropertyChangeSupport(this);
    }

    // Permet √† un observateur de s'abonner √† la propri√©t√© "umweltChange"
    public void addPropertyChangeListener(PropertyChangeListener l) {
        pcs.addPropertyChangeListener("umweltChange", l);
    }

    // Permet de se d√©sabonner
    public void removePropertyChangeListener(PropertyChangeListener l) {
        pcs.removePropertyChangeListener("umweltChange", l);
    }

    // Setter qui notifie le changement
    public void setUmweltPower(int umweltPower) {
        int oldValue = this.umweltPower;
        this.umweltPower = umweltPower;
        // Notifie tous les observateurs que la valeur a chang√©
        pcs.firePropertyChange("umweltChange", oldValue, umweltPower);
    }

    @Override
    public String toString() {
        return "ArtefactTerrestre{UmweltPower=" + umweltPower + "}";
    }
}
</code></pre>
        </div>
      </div>
    </div>
  </div>


  <!-- Carte √âtape 2 -->
  <div class="card-container w-[50rem] h-[60rem] bg-gray-900 rounded shadow-lg relative mx-auto">
    <div class="card w-full h-full">
      <!-- Recto -->
      <div class="card-face flex flex-col p-8 bg-gray-800 rounded">
        <h3 class="text-3xl font-bold mb-4">√âtape 2 : Observateur PrincesseKarina</h3>
        <p class="mb-4 text-lg">Actions pr√©vues :</p>
        <ul class="list-inside space-y-2 text-base">
          <li>
            üëÅÔ∏è <span class="font-semibold">Cr√©er</span> 
            <span class="text-yellow-300 font-semibold">PrincesseKarina</span> 
            qui impl√©mente <span class="text-yellow-300 font-semibold">PropertyChangeListener</span>
          </li>
          <li>
            üí¨ Dans <span class="text-yellow-300 font-semibold">propertyChange</span>, 
            afficher un message indiquant que Karina ressent la vibration
          </li>
          <li>
            üîé Utiliser <span class="text-yellow-300 font-semibold">evt.getOldValue()</span> et 
            <span class="text-yellow-300 font-semibold">evt.getNewValue()</span> pour d√©crire le changement
          </li>
        </ul>
        <p class="text-sm text-gray-400 italic mt-4">Cliquez pour voir le code impl√©ment√©.</p>
      </div>
      <!-- Verso -->
      <div class="card-face card-back bg-gray-900 text-white rounded p-4 flex flex-col">
        <h3 class="text-xl font-semibold mb-4">Code de PrincesseKarina avec commentaires</h3>
        <div class="card-content bg-gray-800 rounded p-2 overflow-auto text-sm h-full">
          <pre class="language-java text-sm leading-normal"><code>
import java.beans.PropertyChangeListener;
import java.beans.PropertyChangeEvent;

class PrincesseKarina implements PropertyChangeListener {
    @Override
    public void propertyChange(PropertyChangeEvent evt) {
        System.out.println("Karina: Ma pierre quantique vibre, un changement est d√©tect√© !");
        System.out.println("Ancienne valeur: " + evt.getOldValue() + " / Nouvelle valeur: " + evt.getNewValue());
    }
}
</code></pre>
        </div>
      </div>
    </div>
  </div>


  <!-- Carte √âtape 3 -->
  <div class="card-container w-[50rem] h-[60rem] bg-gray-900 rounded shadow-lg relative mx-auto">
    <div class="card w-full h-full">
      <!-- Recto -->
      <div class="card-face flex flex-col p-8 bg-gray-800 rounded">
        <h3 class="text-3xl font-bold mb-4">√âtape 3 : MainStory</h3>
        <p class="mb-4 text-lg">Actions pr√©vues :</p>
        <ul class="list-inside space-y-2 text-base">
          <li>
            üöÄ <span class="font-semibold">Instancier</span> 
            <span class="text-yellow-300 font-semibold">ArtefactTerrestre</span>
          </li>
          <li>
            ü§ù <span class="font-semibold">Cr√©er</span> une 
            <span class="text-yellow-300 font-semibold">PrincesseKarina</span> 
            et l'abonner √† l'artefact
          </li>
          <li>
            üîß Modifier <span class="text-yellow-300 font-semibold">umweltPower</span> 
            (ex: 0->10, puis 10->25) et observer la r√©action
          </li>
        </ul>
        <p class="text-sm text-gray-400 italic mt-4">Cliquez pour voir le code impl√©ment√©.</p>
      </div>
      <!-- Verso -->
      <div class="card-face card-back bg-gray-900 text-white rounded p-4 flex flex-col">
        <h3 class="text-xl font-semibold mb-4">Code de MainStory avec commentaires</h3>
        <div class="card-content bg-gray-800 rounded p-2 overflow-auto text-sm h-full">
          <pre class="language-java text-sm leading-normal"><code>
class MainStory {
    public static void main(String[] args) {
        // On cr√©e l'artefact
        ArtefactTerrestre artefact = new ArtefactTerrestre();

        // On cr√©e Karina et on l'abonne √† l'artefact
        PrincesseKarina karina = new PrincesseKarina();
        artefact.addPropertyChangeListener(karina);

        // Modification de l'umweltPower
        // De 0 √† 10
        artefact.setUmweltPower(10); 
        // Karina r√©agit (message affich√© dans la console)

        // De 10 √† 25
        artefact.setUmweltPower(25);
        // Karina r√©agit encore
    }
}
</code></pre>
        </div>
      </div>
    </div>
  </div>

  <!-- Carte R√©cap Finale -->
  <div class="card-container w-[50rem] h-[60rem] bg-gray-900 rounded shadow-lg relative mx-auto">
    <div class="card w-full h-full">
      <!-- Recto -->
      <div class="card-face flex flex-col p-8 bg-gray-800 rounded">
        <h3 class="text-3xl font-bold mb-4">R√©capitulatif</h3>
        <p class="mb-4 text-lg">Pour un d√©butant :</p>
        <ul class="list-inside space-y-2 text-base">
          <li>üî® <span class="font-semibold">D√©finir une classe source</span> avec <span class="text-yellow-300 font-semibold">PropertyChangeSupport</span></li>
          <li>üëÇ <span class="font-semibold">Cr√©er un observateur</span> impl√©mentant <span class="text-yellow-300 font-semibold">PropertyChangeListener</span></li>
          <li>üì¢ Dans le setter, appeler <span class="text-yellow-300 font-semibold">firePropertyChange</span></li>
          <li>üîó <span class="font-semibold">Abonner l‚Äôobservateur</span> √† la source</li>
          <li>‚ö° <span class="font-semibold">Tester</span> en modifiant la valeur pour voir la r√©action imm√©diate</li>
        </ul>
        <p class="text-sm text-gray-400 italic mt-4">Cliquez pour un r√©sum√© sans code.</p>
      </div>
      <!-- Verso -->
      <div class="card-face card-back bg-gray-900 text-white rounded p-4 flex flex-col">
        <h3 class="text-xl font-semibold mb-4">Synth√®se sans code</h3>
        <div class="card-content bg-gray-800 rounded p-2 overflow-auto text-sm h-full">
          <p class="mb-4">
            Le pattern Observer via <code>PropertyChangeListener</code> permet de s√©parer qui change l‚Äô√©tat (la source) 
            et qui r√©agit (l‚Äôobservateur).
          </p>
          <ul class="list-disc list-inside mb-4">
            <li><span class="text-yellow-300 font-semibold">PropertyChangeSupport</span> centralise la notification</li>
            <li><span class="text-yellow-300 font-semibold">PropertyChangeListener</span> r√©agit aux √©v√©nements</li>
            <li><span class="text-yellow-300 font-semibold">firePropertyChange</span> informe tous les observateurs</li>
          </ul>
          <p>
            C‚Äôest un moyen efficace d'appliquer le pattern Observer en Java.
          </p>
        </div>
      </div>
    </div>
  </div>

</section>

<footer class="max-w-7xl mx-auto p-6 mt-6 text-center text-sm text-gray-400">
  ¬© 2024 Impl√©mentation Pattern Observer - Tous droits r√©serv√©s.
</footer>

<!-- Prism JS -->
<script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/prism.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-java.min.js"></script>

<script>
// Flip au clic
document.querySelectorAll('.card-container').forEach((container) => {
    container.addEventListener('click', () => {
        const card = container.querySelector('.card');
        card.classList.toggle('is-flipped');
    });
});
</script>

</body>
</html>
